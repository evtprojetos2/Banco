 <!DOCTYPE html>

<html lang="pt-br">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>RUSH VOD JO√ÉO APK</title>
<style>
    :root {
      --amarelo: #e50914;
      --fundo: #111;
      --painel: #222;
    }
    body {
      margin: 0;
      font-family: sans-serif;
      background: url('https://i.postimg.cc/qR4NCDCQ/background1.jpg') no-repeat center center fixed; background-size: cover;
      color: #fff;
    }
    header {
      background-color: var(--painel);
      padding: 10px;
      text-align: center;
      font-size: 1.2em;
      color: var(--amarelo);
      position: relative;
    }
    header .titulo {
      font-weight: bold;
      font-size: 1.3em;
    }
    .menu-toggle {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 24px;
      cursor: pointer;
      z-index: 1000;
      display: none;
    }
    nav {
      display: none;
      position: absolute;
      top: 50px;
      left: 10px;
      background-color: rgba(0, 0, 0, 0.95);
      border-radius: 8px;
      padding: 10px;
      z-index: 1000;
      width: 160px;
    }
    nav button {
      background: none;
      border: none;
      color: var(--amarelo);
      font-size: 1em;
      padding: 10px;
      width: 100%;
      text-align: left;
      cursor: pointer;
    }
    nav .footer-signature {
      margin-top: 10px;
      font-size: 0.8em;
      color: #888;
      text-align: center;
    }
    .carousel, .grid {
      display: flex;
      flex-wrap: nowrap;
      overflow-x: auto;
      gap: 10px;
      padding: 10px;
    }
    .grid {
      flex-wrap: wrap;
      justify-content: center;
      overflow-x: hidden;
    }
    .item {
      width: 110px;
      background: var(--painel);
      border-radius: 10px;
      overflow: hidden;
      text-align: center;
      flex-shrink: 0;
      position: relative;
    }
    .item img {
      width: 100%;
      aspect-ratio: 3/4;
      object-fit: cover;
      border-radius: 10px 10px 0 0;
    }
    .favorite, .last-viewed {
      position: absolute;
      top: 5px;
      right: 5px;
      background: red;
      color: white;
      padding: 2px 5px;
      font-size: 0.7em;
      border-radius: 4px;
    }
    .category h2 {
      margin-left: 10px;
      font-size: 1.2em;
      color: var(--amarelo);
    }
    video {
      width: 100%;
      max-height: 50vh;
      display: none;
      margin-bottom: 10px;
    }
    .btn-voltar {
      margin: 10px;
      padding: 8px 16px;
      background: var(--amarelo);
      border: none;
      color: #000;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
    }
    .login {
      max-width: 400px;
      margin: 50px auto;
      background: var(--painel);
      padding: 20px;
      border-radius: 10px;
    }
    .login input, .login button {
      display: block;
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 5px;
      border: none;
    }
    .login input {
      background: var(--fundo);
      color: #fff;
    }
    .login button {
      background: var(--amarelo);
      color: #000;
      font-weight: bold;
    }
    #conteudo {
      padding: 10px;
    }
    .episodes button {
      display: block;
      width: 100%;
      margin: 4px 0;
      background: #333;
      color: #fff;
      border: none;
      padding: 10px;
      border-radius: 6px;
      text-align: left;
      cursor: pointer;
    }
    #player-controls {
      display: none;
      justify-content: center;
      gap: 10px;
      margin: 10px 0;
      flex-wrap: wrap;
    }
    #player-controls button {
      background: var(--amarelo);
      color: #000;
      border: none;
      border-radius: 6px;
      padding: 6px 12px;
      font-weight: bold;
      cursor: pointer;
    }
    
.item {
  width: 140px;
  background: var(--painel);
  border-radius: 12px;
  overflow: hidden;
  text-align: center;
  flex-shrink: 0;
  position: relative;
  box-shadow: 0 4px 10px rgba(0,0,0,0.4);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.item:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 16px rgba(0,0,0,0.6);
}
.img-container {
  position: relative;
}
.fav-btn {
  position: absolute;
  top: 5px;
  right: 5px;
  font-size: 1.2em;
  cursor: pointer;
  text-shadow: 0 0 5px black;
  user-select: none;
}

@media (min-width: 800px) {
      .item {
        width: 160px;
      }
      .login {
        margin-top: 100px;
      }
    }
  </style>
<script>
document.addEventListener("DOMContentLoaded", () => {
  entrarDireto();
});

async function entrarDireto() {
  const token = `username=${userG}&password=${passG}`;
  document.getElementById("conteudo").style.display = "block";
  document.getElementById("conteudo").innerHTML = "Carregando...";

  try {
    // Carregar filmes e s√©ries em paralelo
    const filmesPromise = fetch(`${urlG}/player_api.php?${token}&action=get_vod_streams`).then(r => r.json());
    const seriesPromise = fetch(`${urlG}/player_api.php?${token}&action=get_series`).then(r => r.json());

    // Assim que filmes chegarem
    filmesPromise.then(vods => {
      streamBase = `${urlG}/movie/${userG}/${passG}/`;
      filmes = organizarPorCategoria(vods);
      renderTelaPrincipal();
    });

    // Assim que s√©ries chegarem
    seriesPromise.then(sers => {
      series = organizarPorCategoria(sers);
      renderTelaPrincipal();
    });

    // Esperar todos terminarem antes de marcar como conclu√≠do
    await Promise.all([filmesPromise, seriesPromise]);

  } catch (e) {
    console.error("Erro ao conectar na API fixa:", e);
    document.getElementById("conteudo").innerHTML = "<p style='color:red'>Erro ao conectar no servidor.</p>";
  }
}
  </script>
</head>
<body>
<header>
<div class="titulo">
<div style="display:flex; align-items:center; justify-content:center; gap:10px;">
<img alt="Logo" src="https://i.postimg.cc/mDjt33Y4/home-logo.png" style="max-height:40px;"/>
<span style="font-size:1.4em; font-weight:bold; color:#e50914; font-family:sans-serif; text-shadow: 2px 2px 4px rgba(0,0,0,0.7);">
                RUSH VOD
                </span>
</div>
</div>
<div class="menu-toggle" id="menuToggle" onclick="toggleMenu()">‚ò∞</div>
<nav id="menu">
<button onclick="renderTelaPrincipal()">üè† Tela Inicial</button>
<button onclick="abrirFilmes()">üçø Filmes</button>
<button onclick="abrirSeries()">üé• S√©ries</button>
<button onclick="abrirFavoritos()">‚≠ê Favoritos</button>
<button onclick="abrirUltimos()">üïì Visto por √öltimo</button>
<button onclick="logout()">üîÅ Sair</button>
<div class="footer-signature">projeto Jo√£o aplicativo</div>
</nav>
</header>
<div id="player-controls">
<button onclick="playerPlay()">‚ñ∂Ô∏è Play</button>
<button onclick="playerPause()">‚è∏Ô∏è Pause</button>
<button onclick="playerStop()">‚èπÔ∏è Stop</button>
<button onclick="playerBack()">‚è™ -10s</button>
<button onclick="playerForward()">‚è© +10s</button>
</div>
<video controls="" id="player"></video>
<div id="conteudo" stylish="display:none">Carregando...</div>
<script>
let filmes = {}, series = {}, streamBase = "";
let urlG = "http://flayto.click";
let userG = "felipe96452";
let passG = "8761dias";
let favoritos = JSON.parse(localStorage.getItem("favoritos") || "[]");
let ultimos = JSON.parse(localStorage.getItem("ultimos") || "[]");

function toggleMenu() {
  const menu = document.getElementById("menu");
  menu.style.display = menu.style.display === "block" ? "none" : "block";
}

function playerPlay() { document.getElementById("player").play(); }
function playerPause() { document.getElementById("player").pause(); }
function playerStop() {
  const p = document.getElementById("player");
  p.pause(); p.currentTime = 0;
}
function playerBack() { const p = document.getElementById("player"); p.currentTime -= 10; }
function playerForward() { const p = document.getElementById("player"); p.currentTime += 10; }

function exibirPlayer(link, item = null) {
  const player = document.getElementById("player");
  const controls = document.getElementById("player-controls");
  player.src = link;
  player.style.display = "block";
  controls.style.display = "flex";
  player.play();
  window.scrollTo({ top: 0, behavior: 'smooth' });
  if (item) registrarUltimo(item);
}

function ocultarPlayer() {
  const player = document.getElementById("player");
  const controls = document.getElementById("player-controls");
  player.pause();
  player.removeAttribute("src");
  player.load();
  player.style.display = "none";
  controls.style.display = "none";
}

function organizarPorCategoria(lista) {
  const categorias = {};
  lista.forEach(item => {
    const cat = item.category_name || "Outros";
    if (!categorias[cat]) categorias[cat] = [];
    if (!categorias[cat].some(i => i.name === item.name)) {
      categorias[cat].push(item);
    }
  });
  return categorias;
}

function registrarUltimo(item) {
  ultimos = ultimos.filter(i => i.name !== item.name);
  ultimos.unshift(item);
  if (ultimos.length > 50) ultimos.pop();
  localStorage.setItem("ultimos", JSON.stringify(ultimos));
}

function alternarFavorito(item) {
  const idx = favoritos.findIndex(i => i.name === item.name);
  if (idx >= 0) favoritos.splice(idx, 1);
  else favoritos.unshift(item);
  localStorage.setItem("favoritos", JSON.stringify(favoritos));
}

function renderItens(lista, isFilme = true) {
  const grid = document.createElement("div");
  grid.className = "grid";
  
  lista.forEach(item => {
    const el = document.createElement("div");
    el.className = "item";

    const capa = isFilme ? item.stream_icon : item.cover;
    const isFav = favoritos.some(f => f.name === item.name);

    el.innerHTML = `
      <div class="img-container">
        <img loading="lazy" src="${capa || ''}" onerror="this.style.display='none'">
        <span class="fav-btn" title="Favoritar">${isFav ? "‚≠ê" : "‚òÜ"}</span>
      </div>
      <p>${item.name}</p>
    `;

    // Clique no card ‚Üí reproduzir
    el.querySelector(".img-container").onclick = () => 
      isFilme 
        ? exibirPlayer(`${streamBase}${item.stream_id}.mp4`, item)
        : abrirSerieDetalhe(item.series_id, item.name);

    // Clique na estrela ‚Üí favoritar/desfavoritar
    el.querySelector(".fav-btn").onclick = (e) => {
      e.stopPropagation();
      alternarFavorito(item);
      e.target.textContent = favoritos.some(f => f.name === item.name) ? "‚≠ê" : "‚òÜ";
    };

    grid.appendChild(el);
  });
  return grid;
}

function abrirFilmes() {
  const conteudo = document.getElementById("conteudo");
  ocultarPlayer();
  conteudo.innerHTML = `<h2>üçø Todos os Filmes <button class='btn-voltar' onclick='renderTelaPrincipal()'>‚Üª Voltar</button></h2>`;
  conteudo.appendChild(renderItens(Object.values(filmes).flat(), true));
}

function abrirSeries() {
  const conteudo = document.getElementById("conteudo");
  ocultarPlayer();
  conteudo.innerHTML = `<h2>üé• Todas as S√©ries <button class='btn-voltar' onclick='renderTelaPrincipal()'>‚Üª Voltar</button></h2>`;
  conteudo.appendChild(renderItens(Object.values(series).flat(), false));
}

function abrirFavoritos() {
  const conteudo = document.getElementById("conteudo");
  ocultarPlayer();
  conteudo.innerHTML = `<h2>‚≠ê Favoritos <button class='btn-voltar' onclick='renderTelaPrincipal()'>‚Üª Voltar</button></h2>`;
  conteudo.appendChild(renderItens(favoritos));
}

function abrirUltimos() {
  const conteudo = document.getElementById("conteudo");
  ocultarPlayer();
  conteudo.innerHTML = `<h2>üïì Visto por √öltimo <button class='btn-voltar' onclick='renderTelaPrincipal()'>‚Üª Voltar</button></h2>`;
  conteudo.appendChild(renderItens(ultimos));
}

const slides = [
  "https://image.tmdb.org/t/p/original/xOMo8BRK7PfcJv9JCnx7s5hj0PX.jpg",
  "https://image.tmdb.org/t/p/original/bOGkgRGdhrBYJSLpXaxhXVstddV.jpg",
  "https://image.tmdb.org/t/p/w500_and_h282_face/jJKZaTBNenlFclQyjrnvzkRmvWE.jpg",
  "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT2bbyzQJHvGwsPX-Fd4zAt4qmDsxQzlOvnVrFjP60-wwKPL0MMg0QIBQE&s=10",
  "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR08L6zQEuwKqudyHiDQTRSRsuCFPCif8c2gONNrJU7aNro2g-LLhzc515G&s=10",
  "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ7ao_HBTqEFfxVk3wuTS5OlGfTLT36tyyKs5mPIiOYcMNvvf41P4WAz35D&s=10",
  "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRNCBD3aPRvaq97C3HJGLMVzJXqcExysGxK08OQ4YGCUsGzVKxTzA1mFQM&s=10",
  "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSvEj-OR-oW5hdyGZy8m_J_KNzz1-qs2b1UPKiw_QaCkgj397cznwJTZJY&s=10",
  "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcShVObxD9nmBUWDzqq1V7Cki6kaOSaXDI25gyEp7FEcCCTLCefu-5fADraq&s=10",
  "https://image.tmdb.org/t/p/original/kCGlIMHnOm8JPXq3rXM6c5wMxcT.jpg",
  "https://image.tmdb.org/t/p/original/nLBRD7UPR6GjmWQp6ASAfCTaWKX.jpg",
  "https://image.tmdb.org/t/p/original/bGksau9GGu0uJ8DJQ8DYc9JW5LM.jpg",
  "https://image.tmdb.org/t/p/original/pWsD91G2R1Da3AKM3ymr3UoIfRb.jpg"
];
let slideIndex = 0;
function slideShow() {
  const el = document.getElementById("slideImg");
  if (el) {
    el.src = slides[slideIndex];
    slideIndex = (slideIndex + 1) % slides.length;
  }
}
setInterval(slideShow, 4000);

function renderTelaPrincipal() {
  const div = document.getElementById("conteudo");
  ocultarPlayer();
  div.innerHTML = "";

  document.getElementById("menuToggle").style.display = "block";

  const slideContainer = document.createElement("div");
  slideContainer.id = "slideshow";
  slideContainer.innerHTML = `<img id="slideImg" src="" style="width:100%;max-height:220px;border-radius:8px;margin:10px 0">`;
  div.appendChild(slideContainer);
  slideShow();

  // Filmes em destaque
  if (Object.keys(filmes).length) {
    const secFilmes = document.createElement("div");
    secFilmes.className = "category";
    secFilmes.innerHTML = `<h2>üçø Filmes em destaque <button class='btn-voltar' onclick='abrirFilmes()'>Ver mais</button></h2>`;
    const filmesRow = document.createElement("div");
    filmesRow.className = "carousel";
    Object.keys(filmes).forEach(cat => {
      filmes[cat].slice(0, 10).forEach(f => {
        const item = document.createElement("div");
        item.className = "item";
        item.innerHTML = `<img loading="lazy" src="${f.stream_icon || ''}" onerror="this.style.display='none'"><p>${f.name}</p>`;
        item.ondblclick = () => alternarFavorito(f);
        item.onclick = () => exibirPlayer(`${streamBase}${f.stream_id}.mp4`, f);
        filmesRow.appendChild(item);
      });
    });
    secFilmes.appendChild(filmesRow);
    div.appendChild(secFilmes);

    // Filmes - Desenhos
    const catDesenhos = Object.keys(filmes).find(c => /desenho|anima√ß|infantil/i.test(c));
    if (catDesenhos) {
      const secDesenhos = document.createElement("div");
      secDesenhos.className = "category";
      secDesenhos.innerHTML = `<h2>üé® Desenhos <button class='btn-voltar' onclick='abrirFilmes()'>Ver mais</button></h2>`;
      const desenhosRow = document.createElement("div");
      desenhosRow.className = "carousel";
      filmes[catDesenhos].slice(0, 10).forEach(f => {
        const item = document.createElement("div");
        item.className = "item";
        item.innerHTML = `<img loading="lazy" src="${f.stream_icon || ''}" onerror="this.style.display='none'"><p>${f.name}</p>`;
        item.ondblclick = () => alternarFavorito(f);
        item.onclick = () => exibirPlayer(`${streamBase}${f.stream_id}.mp4`, f);
        desenhosRow.appendChild(item);
      });
      secDesenhos.appendChild(desenhosRow);
      div.appendChild(secDesenhos);
    }
  }

  // S√©ries em destaque
  if (Object.keys(series).length) {
    const secSeries = document.createElement("div");
    secSeries.className = "category";
    secSeries.innerHTML = `<h2>üé• S√©ries em destaque <button class='btn-voltar' onclick='abrirSeries()'>Ver mais</button></h2>`;
    const seriesRow = document.createElement("div");
    seriesRow.className = "carousel";
    Object.keys(series).forEach(cat => {
      series[cat].slice(0, 10).forEach(s => {
        const item = document.createElement("div");
        item.className = "item";
        item.innerHTML = `<img loading="lazy" src="${s.cover || ''}" onerror="this.style.display='none'"><p>${s.name}</p>`;
        item.ondblclick = () => alternarFavorito(s);
        item.onclick = () => abrirSerieDetalhe(s.series_id, s.name);
        seriesRow.appendChild(item);
      });
    });
    secSeries.appendChild(seriesRow);
    div.appendChild(secSeries);

    // S√©ries - Animes
    const catAnimes = Object.keys(series).find(c => /anime|anima√ß[√£a]o japonesa/i.test(c));
    if (catAnimes) {
      const secAnimes = document.createElement("div");
      secAnimes.className = "category";
      secAnimes.innerHTML = `<h2>üç• Animes <button class='btn-voltar' onclick='abrirSeries()'>Ver mais</button></h2>`;
      const animesRow = document.createElement("div");
      animesRow.className = "carousel";
      series[catAnimes].slice(0, 10).forEach(s => {
        const item = document.createElement("div");
        item.className = "item";
        item.innerHTML = `<img loading="lazy" src="${s.cover || ''}" onerror="this.style.display='none'"><p>${s.name}</p>`;
        item.ondblclick = () => alternarFavorito(s);
        item.onclick = () => abrirSerieDetalhe(s.series_id, s.name);
        animesRow.appendChild(item);
      });
      secAnimes.appendChild(animesRow);
      div.appendChild(secAnimes);
    }
  }
}
</script>
<script>
async 
async function abrirSerieDetalhe(seriesId, nome) {
  const token = `username=${userG}&password=${passG}`;
  const conteudo = document.getElementById("conteudo");
  ocultarPlayer();
  conteudo.innerHTML = `<h2>${nome} <button class='btn-voltar' onclick='abrirSeries()'>‚Üª Voltar</button></h2>`;

  try {
    const res = await fetch(`${urlG}/player_api.php?${token}&action=get_series_info&series_id=${seriesId}`);
    const data = await res.json();

    if (!data.episodes || Object.keys(data.episodes).length === 0) {
      conteudo.innerHTML += "<p style='color:#ccc'>Nenhum epis√≥dio encontrado para esta s√©rie.</p>";
      return;
    }

    const temporadas = Object.keys(data.episodes).sort((a, b) => parseInt(a) - parseInt(b));
    const temporadaSelect = document.createElement("select");
    temporadaSelect.style.padding = "8px";
    temporadaSelect.style.margin = "10px 0";
    temporadaSelect.style.borderRadius = "6px";
    temporadaSelect.style.background = "#333";
    temporadaSelect.style.color = "#fff";

    temporadas.forEach(temp => {
      const opt = document.createElement("option");
      opt.value = temp;
      opt.textContent = `Temporada ${temp}`;
      temporadaSelect.appendChild(opt);
    });

    conteudo.appendChild(temporadaSelect);

    const gruposContainer = document.createElement("div");
    gruposContainer.style.margin = "10px 0";
    conteudo.appendChild(gruposContainer);

    const epList = document.createElement("div");
    epList.className = "episodes";
    conteudo.appendChild(epList);

    function carregarGrupos(temporada) {
      gruposContainer.innerHTML = "";
      epList.innerHTML = "";
      const episodios = data.episodes[temporada].sort((a, b) => a.episode_num - b.episode_num);
      const grupos = [];
      for (let i = 0; i < episodios.length; i += 10) {
        grupos.push(episodios.slice(i, i + 10));
      }

      grupos.forEach(grupo => {
        const btnGrupo = document.createElement("button");
        btnGrupo.textContent = `${grupo[0].episode_num} - ${grupo[grupo.length - 1].episode_num}`;
        btnGrupo.style.margin = "4px";
        btnGrupo.style.padding = "6px 12px";
        btnGrupo.style.background = "#444";
        btnGrupo.style.color = "#fff";
        btnGrupo.style.border = "none";
        btnGrupo.style.borderRadius = "4px";
        btnGrupo.style.cursor = "pointer";

        btnGrupo.onclick = () => {
          epList.innerHTML = "";
          grupo.forEach(ep => {
            const btnEp = document.createElement("button");
            btnEp.innerText = `T${ep.season} Ep${ep.episode_num}: ${ep.title}`;
            btnEp.onclick = () => exibirPlayer(`${urlG}/series/${userG}/${passG}/${ep.id}.mp4`, ep);
            epList.appendChild(btnEp);
          });
          exibirPlayer(`${urlG}/series/${userG}/${passG}/${grupo[0].id}.mp4`, grupo[0]);
        };
        gruposContainer.appendChild(btnGrupo);
      });
      if (gruposContainer.firstChild) gruposContainer.firstChild.click();
    }

    temporadaSelect.onchange = () => carregarGrupos(temporadaSelect.value);
    carregarGrupos(temporadas[0]);

  } catch (e) {
    conteudo.innerHTML += "<p style='color:red'>Erro ao carregar epis√≥dios.</p>";
  }
}
</script>
</body>
</html>